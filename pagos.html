<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pasarela de Pago - LatinPhone</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="pagos.css">

    <style>
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 300px;
            height: 100%;
            background: #fff;
            color: #000;
            box-shadow: -2px 0 5px rgba(0,0,0,0.3);
            z-index: 2000;
            padding: 1rem;
            overflow-y: auto;
        }
        .cart-modal.show { display: block; }
        .cart-modal .close-cart {
            background: none;
            border: none;
            font-size: 1.5rem;
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
        .cart-item { margin-bottom: 0.5rem; }
    </style>
    
    <!-- Lottie Animation -->
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js" defer></script>
    
    <!-- Confetti JS -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js" defer></script>
    
</head>
<body>
    <nav class="top-bar">
        <a href="index.html" class="top-link"><i class="fas fa-home"></i> Inicio</a>
        <div class="top-right">
            <a href="#" class="top-link disabled" id="account-link" aria-disabled="true" style="display:none;"><i class="fas fa-user"></i> Mi cuenta</a>
            <a href="#" class="top-link cart-indicator" id="cart-link"><i class="fas fa-shopping-cart"></i><span id="cart-count">0</span></a>
        </div>
    </nav>
    <div id="cart-modal" class="cart-modal">
        <div class="cart-modal-content">
            <button class="close-cart" id="close-cart">&times;</button>
            <h3>Tu carrito</h3>
            <ul id="cart-items-list"></ul>
        </div>
    </div>
    <div class="checkout-container">
        <!-- Cabecera de la pasarela de pago -->
        <header class="checkout-header fade-in">
            <div class="checkout-logo">
                <div class="checkout-logo-text">LatinPhone</div>
            </div>
            <h1 class="checkout-title">Pasarela de Pago Segura</h1>
            <p class="checkout-subtitle">Completa tu pedido de forma rÃ¡pida y segura para recibir los mejores equipos tecnolÃ³gicos de LatinoamÃ©rica</p>
        </header>

        <!-- Pasos del proceso de pago mejorados -->
        <nav class="checkout-steps fade-in">
            <div class="checkout-step active" data-step="1">
                <div class="step-number">
                    <span class="step-icon"><i class="fas fa-globe-americas"></i></span>
                </div>
                <div class="step-text">PaÃ­s y Productos</div>
            </div>
            <div class="checkout-step" data-step="2">
                <div class="step-number">
                    <span class="step-icon"><i class="fas fa-truck"></i></span>
                </div>
                <div class="step-text">EnvÃ­o y Regalo</div>
            </div>
            <div class="checkout-step" data-step="3">
                <div class="step-number">
                    <span class="step-icon"><i class="fas fa-credit-card"></i></span>
                </div>
                <div class="step-text">MÃ©todo de Pago</div>
            </div>
            <div class="checkout-step" data-step="4">
                <div class="step-number">
                    <span class="step-icon"><i class="fas fa-check"></i></span>
                </div>
                <div class="step-text">ConfirmaciÃ³n</div>
            </div>
        </nav>

        <!-- Contenido del checkout -->
        <main class="checkout-content">
            <!-- SecciÃ³n 1: PaÃ­s y Productos -->
            <div class="checkout-section active" id="section-1">
                <!-- Featured Product -->
                <div class="featured-product">
                    <video class="featured-video" autoplay muted loop playsinline>
                        <source src="https://images.samsung.com/is/content/samsung/assets/es/14-03-2025/G90XF_KV_PC_Notext.mp4" type="video/mp4">
                        Tu navegador no soporta videos HTML5.
                    </video>
                    <div class="featured-overlay fade-in">
                        <h3>Nueva colecciÃ³n Galaxy 2025</h3>
                        <p>Descubre la Ãºltima tecnologÃ­a Samsung con la mejor experiencia en fotografÃ­a, baterÃ­a y rendimiento.</p>
                    </div>
                </div>

                <div id="step-country" class="wizard-step active">
                    <h2 class="section-title"><i class="fas fa-globe-americas"></i> Selecciona tu paÃ­s</h2>
                    <div class="country-grid">
                    <div class="country-card" data-country="argentina">
                        <div class="country-flag">ðŸ‡¦ðŸ‡·</div>
                        <div class="country-name">Argentina</div>
                    </div>
                    <div class="country-card" data-country="bolivia">
                        <div class="country-flag">ðŸ‡§ðŸ‡´</div>
                        <div class="country-name">Bolivia</div>
                    </div>
                    <div class="country-card" data-country="chile">
                        <div class="country-flag">ðŸ‡¨ðŸ‡±</div>
                        <div class="country-name">Chile</div>
                    </div>
                    <div class="country-card" data-country="colombia">
                        <div class="country-flag">ðŸ‡¨ðŸ‡´</div>
                        <div class="country-name">Colombia</div>
                    </div>
                    <div class="country-card" data-country="costarica">
                        <div class="country-flag">ðŸ‡¨ðŸ‡·</div>
                        <div class="country-name">Costa Rica</div>
                    </div>
                    <div class="country-card" data-country="ecuador">
                        <div class="country-flag">ðŸ‡ªðŸ‡¨</div>
                        <div class="country-name">Ecuador</div>
                    </div>
                    <div class="country-card" data-country="elsalvador">
                        <div class="country-flag">ðŸ‡¸ðŸ‡»</div>
                        <div class="country-name">El Salvador</div>
                    </div>
                    <div class="country-card" data-country="guatemala">
                        <div class="country-flag">ðŸ‡¬ðŸ‡¹</div>
                        <div class="country-name">Guatemala</div>
                    </div>
                    <div class="country-card" data-country="honduras">
                        <div class="country-flag">ðŸ‡­ðŸ‡³</div>
                        <div class="country-name">Honduras</div>
                    </div>
                    <div class="country-card" data-country="mexico">
                        <div class="country-flag">ðŸ‡²ðŸ‡½</div>
                        <div class="country-name">MÃ©xico</div>
                    </div>
                    <div class="country-card" data-country="nicaragua">
                        <div class="country-flag">ðŸ‡³ðŸ‡®</div>
                        <div class="country-name">Nicaragua</div>
                    </div>
                    <div class="country-card" data-country="panama">
                        <div class="country-flag">ðŸ‡µðŸ‡¦</div>
                        <div class="country-name">PanamÃ¡</div>
                    </div>
                    <div class="country-card" data-country="paraguay">
                        <div class="country-flag">ðŸ‡µðŸ‡¾</div>
                        <div class="country-name">Paraguay</div>
                    </div>
                    <div class="country-card" data-country="peru">
                        <div class="country-flag">ðŸ‡µðŸ‡ª</div>
                        <div class="country-name">PerÃº</div>
                    </div>
                    <div class="country-card" data-country="republicadominicana">
                        <div class="country-flag">ðŸ‡©ðŸ‡´</div>
                        <div class="country-name">RepÃºblica Dominicana</div>
                    </div>
                    <div class="country-card" data-country="uruguay">
                        <div class="country-flag">ðŸ‡ºðŸ‡¾</div>
                        <div class="country-name">Uruguay</div>
                    </div>
                    <div class="country-card" data-country="venezuela">
                        <div class="country-flag">ðŸ‡»ðŸ‡ª</div>
                        <div class="country-name">Venezuela</div>
                    </div>
                    </div>
                </div>

                <div class="product-selection" style="margin-top: 6rem; display: none;">
                    <div id="step-category" class="wizard-step">
                        <button class="btn btn-secondary back-btn" id="back-to-country" style="display:none;">
                            <i class="fas fa-arrow-left btn-icon"></i>Volver
                        </button>
                        <h2 class="section-title"><i class="fas fa-list"></i> Selecciona la categorÃ­a</h2>

                        <div class="category-grid">
                        <div class="category-card" data-category="smartphones">
                            <div class="category-icon"><i class="fas fa-mobile-alt"></i></div>
                            <div class="category-info">
                                <div class="category-name">Smartphones</div>
                            </div>
                        </div>
                        <div class="category-card" data-category="tablets">
                            <div class="category-icon"><i class="fas fa-tablet-alt"></i></div>
                            <div class="category-info">
                                <div class="category-name">Tablets</div>
                            </div>
                        </div>
                        <div class="category-card" data-category="accesorios">
                            <div class="category-icon"><i class="fas fa-headphones"></i></div>
                            <div class="category-info">
                                <div class="category-name">Accesorios</div>
                            </div>
                        </div>
                        <div class="category-card" data-category="smartwatches">
                            <div class="category-icon"><i class="fas fa-stopwatch"></i></div>
                            <div class="category-info">
                                <div class="category-name">Smartwatches</div>
                            </div>
                        </div>
                        <div class="category-card" data-category="televisores"> 
                            <div class="category-icon"><i class="fas fa-tv"></i></div>
                            <div class="category-info">
                                <div class="category-name">Televisores</div>
                            </div>
                        </div>
                        <div class="category-card" data-category="videojuegos">
                            <div class="category-icon"><i class="fas fa-gamepad"></i></div>
                            <div class="category-info">
                                <div class="category-name">Videojuegos</div>
                            </div>
                        </div>
                        <div class="category-card" data-category="pc">
                            <div class="category-icon"><i class="fas fa-laptop"></i></div>
                            <div class="category-info">
                                <div class="category-name">PC</div>
                            </div>
                        </div>
                        </div>
                    </div>

                    <div class="brand-selection wizard-step" id="step-brand" style="margin-top: 6rem; display: none;">
                        <button class="btn btn-secondary back-btn" id="back-to-category">
                            <i class="fas fa-arrow-left btn-icon"></i>Volver
                        </button>
                        <h2 class="section-title"><i class="fas fa-building"></i> Selecciona la marca</h2>

                        <div class="brand-grid" id="brand-grid">
                            <!-- Las marcas se cargarÃ¡n dinÃ¡micamente segÃºn la categorÃ­a seleccionada -->
                        </div>
                    </div>

                    <div class="product-step wizard-step" id="step-product" style="margin-top: 6rem; display: none;">
                        <button class="btn btn-secondary back-btn" id="back-to-brand">
                            <i class="fas fa-arrow-left btn-icon"></i>Volver
                        </button>
                        <h2 class="section-title"><i class="fas fa-mobile-alt"></i> Selecciona el producto</h2>

                        <div class="product-grid" id="product-grid">
                            <!-- Los productos se cargarÃ¡n dinÃ¡micamente segÃºn la marca seleccionada -->
                        </div>

                        <div class="cart-section" style="margin-top: 6rem; display: none;">
                            <h2 class="section-title"><i class="fas fa-shopping-cart"></i> Tu carrito</h2>

                            <div class="checkout-grid">
                                <div class="cart-items" id="cart-items">
                                    <div class="cart-empty">
                                        <i class="fas fa-shopping-cart"></i>
                                        <p>Tu carrito estÃ¡ vacÃ­o</p>
                                        <p>Selecciona productos para continuar</p>
                                    </div>
                                </div>

                                <div class="order-summary">
                                    <div class="summary-header">
                                        <i class="fas fa-receipt"></i> Resumen del pedido
                                    </div>
                                    <div class="summary-content">
                                        <div class="exchange-rate-info">
                                            Tasa actual: 1 USD = 225 Bs
                                        </div>
                                        <div class="summary-row">
                                            <span>Subtotal:</span>
                                            <span id="subtotal">$0.00</span>
                                        </div>
                                        <div class="summary-row">
                                            <span>IVA (16%):</span>
                                            <span id="tax">$0.00</span>
                                        </div>
                                        <div class="summary-row">
                                            <span>EnvÃ­o:</span>
                                            <span id="shipping">$0.00</span>
                                        </div>
                                        <div class="summary-row">
                                            <span>Seguro:</span>
                                            <span id="insurance">$0.00</span>
                                        </div>
                                        <div class="summary-row total">
                                            <span>Total:</span>
                                            <div>
                                                <div id="total">$0.00</div>
                                                <div class="bs-price" id="total-bs">0.00 Bs</div>
                                            </div>
                                        </div>

                                        <div class="checkout-actions">
                                            <button class="btn btn-primary btn-block" id="continue-to-shipping">
                                                <i class="fas fa-truck btn-icon"></i>Continuar con el envÃ­o
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SecciÃ³n 2: Opciones de EnvÃ­o y Regalo (Mejorada) -->
            <div class="checkout-section" id="section-2">
                <!-- Resumen de selecciones para evitar desplazamiento -->
                <div id="selection-summary" class="summary-box">
                    <p id="summary-gift">Regalo: ninguno</p>
                    <p id="summary-shipping">EnvÃ­o: Express ($70.00)</p>
                    <p id="summary-company">Empresa: sin seleccionar</p>
                    <p id="summary-insurance">Seguro: Premium ($50.00)</p>
                </div>

                <div class="gift-section-header">
                    <div class="gift-icon">
                        <i class="fas fa-gift"></i>
                    </div>
                    <div class="gift-info">
                        <h3>Â¡Elige un regalo GRATIS!</h3>
                        <p>Como agradecimiento por tu compra, selecciona uno de estos productos para recibirlo completamente gratis con tu pedido.</p>
                    </div>
                </div>
                
                <div class="gift-grid" id="gift-grid">
                    <!-- Los regalos se cargarÃ¡n dinÃ¡micamente (productos con precio < $50) -->
                </div>

                <div id="gift-summary" class="summary-card hidden">
                    <span id="gift-summary-text"></span>
                    <button id="change-gift" class="btn btn-secondary btn-small">Cambiar</button>
                </div>

                <h2 class="section-title" style="margin-top: 6rem;"><i class="fas fa-shipping-fast"></i> Elige tu mÃ©todo de envÃ­o</h2>

                <div class="shipping-options">
                    <div class="shipping-option" data-shipping="express" data-price="70">
                        <div class="shipping-radio"></div>
                        <div class="shipping-info">
                            <div class="shipping-title">
                                <i class="fas fa-shipping-fast"></i> Express (1-4 dÃ­as)
                            </div>
                            <div class="shipping-description">Entrega rÃ¡pida con seguimiento completo y notificaciones en tiempo real</div>
                        </div>
                        <div class="shipping-price">$70.00</div>
                    </div>
                    <div class="shipping-option" data-shipping="standard" data-price="35">
                        <div class="shipping-radio"></div>
                        <div class="shipping-info">
                            <div class="shipping-title">
                                <i class="fas fa-truck"></i> EstÃ¡ndar (1-10 dÃ­as)
                            </div>
                            <div class="shipping-description">Equilibrio entre velocidad y costo, con seguimiento internacional</div>
                        </div>
                        <div class="shipping-price">$35.00</div>
                    </div>
                    <div class="shipping-option" data-shipping="free" data-price="0">
                        <div class="shipping-radio"></div>
                        <div class="shipping-info">
                            <div class="shipping-title">
                                <i class="fas fa-box"></i> Gratuito (15-20 dÃ­as)
                            </div>
                            <div class="shipping-description">EnvÃ­o gratuito pero con mayor tiempo de espera, seguimiento bÃ¡sico</div>
                        </div>
                        <div class="shipping-price">$0.00</div>
                    </div>
                </div>

                <div id="shipping-summary" class="summary-card hidden">
                    <span id="shipping-summary-text"></span>
                    <button id="change-shipping" class="btn btn-secondary btn-small">Cambiar</button>
                </div>

                <div class="shipping-company" style="margin-top: 4rem;">
                    <h2 class="section-title"><i class="fas fa-building"></i> Selecciona la empresa de transporte</h2>

                    <div class="shipping-company-grid" id="shipping-company-container">
                        <div class="shipping-company-card" data-company="dhl" data-name="DHL">
                            <img src="https://www.logo.wine/a/logo/DHL/DHL-Logo.wine.svg" alt="DHL">
                        </div>
                        <div class="shipping-company-card" data-company="fedex" data-name="FedEx">
                            <img src="https://www.logo.wine/a/logo/FedEx_Express/FedEx_Express-Logo.wine.svg" alt="FedEx">
                        </div>
                        <div class="shipping-company-card" data-company="zoom" data-name="ZOOM">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/7/71/Grupo_ZOOM_logo.png?20211116211646" alt="ZOOM">
                        </div>
                        <div class="shipping-company-card" data-company="tealca" data-name="TEALCA">
                            <img src="https://www.tealca.es/wp-content/uploads/logo.png" alt="TEALCA">
                        </div>
                        <div class="shipping-company-card" data-company="mrw" data-name="MRW">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/26/MRW_logo.svg/477px-MRW_logo.svg.png" alt="MRW">
                        </div>
                        <div class="shipping-company-card" data-company="liberty" data-name="Liberty Express">
                            <img src="https://libertyexpress.com/wp-content/themes/kutis/assets/svg/logo_banner.svg" alt="Liberty Express">
                        </div>
                    </div>

                    <div id="shipping-company-summary" class="summary-card hidden">
                        <span id="shipping-company-summary-text"></span>
                        <button id="change-shipping-company" class="btn btn-secondary btn-small">Cambiar</button>
                    </div>
                </div>

                <h2 class="section-title" style="margin-top: 5rem;"><i class="fas fa-shield-alt"></i> Seguro de equipo (opcional)</h2>

                <div class="insurance-options">
                    <div class="insurance-option premium" data-insurance="true" data-price="50">
                        <div class="shipping-radio"></div>
                        <div class="insurance-info">
                            <div class="insurance-title">
                                <i class="fas fa-shield-alt" style="color: #4cd964;"></i>
                                Seguro Premium
                            </div>
                            <div class="insurance-description">Protege tu dispositivo contra daÃ±os, robos y pÃ©rdidas durante 1 aÃ±o completo con cobertura internacional</div>
                        </div>
                        <div class="insurance-price">$50.00</div>
                    </div>
                    <div class="insurance-option" data-insurance="false" data-price="0">
                        <div class="shipping-radio"></div>
                        <div class="insurance-info">
                            <div class="insurance-title">
                                <i class="fas fa-times-circle" style="color: var(--accent-color);"></i>
                                Sin seguro
                            </div>
                            <div class="insurance-description">No incluir seguro adicional para el dispositivo</div>
                        </div>
                        <div class="insurance-price">$0.00</div>
                    </div>
                </div>

                <div id="insurance-summary" class="summary-card hidden">
                    <span id="insurance-summary-text"></span>
                    <button id="change-insurance" class="btn btn-secondary btn-small">Cambiar</button>
                </div>

                <div class="tax-notification">
                    <h4><i class="fas fa-exclamation-triangle"></i> InformaciÃ³n importante sobre tasas de nacionalizaciÃ³n</h4>
                    <p>Al ser una importaciÃ³n, el SENIAT (Servicio Nacional Integrado de AdministraciÃ³n Aduanera y Tributaria) cobra una tasa de nacionalizaciÃ³n del 2% sobre el valor total de la compra. Este monto debe pagarse en moneda local (BolÃ­vares) en las 4 horas posteriores a la compra de su pedido.</p>
                    <p>Este cobro no estÃ¡ incluido en el precio y debe ser pagado directamente a la empresa de nacionalizaciÃ³n aduanera en moneda local.</p>
                    <div class="tax-checkbox">
                        <input type="checkbox" id="accept-tax" required>
                        <label for="accept-tax">Entiendo y acepto que debo pagar la tasa de nacionalizaciÃ³n (2%) en moneda local.</label>
                    </div>
                    <div id="tax-info" style="display: none; text-align: justify;">
                        <p>El monto aproximado a pagar es <strong><span id="tax-amount-bs"></span> Bs</strong>.</p>
                        <img src="https://catcgr.com/wp-content/uploads/2024/02/seniat-300x107.png" alt="Logo SENIAT" class="seniat-logo">
                    </div>
                </div>

                <div class="checkout-actions" style="margin-top: 5rem; display: flex; justify-content: space-between; flex-wrap: wrap; gap: 1.5rem;">
                    <button class="btn btn-secondary" id="back-to-products">
                        <i class="fas fa-arrow-left btn-icon"></i>Volver a productos
                    </button>
                    <button class="btn btn-primary" id="continue-to-payment">
                        <i class="fas fa-credit-card btn-icon"></i>Continuar al pago
                    </button>
                </div>
            </div>

            <!-- SecciÃ³n 3: MÃ©todo de Pago (Mejorada) -->
            <div class="checkout-section" id="section-3">
                <h2 class="section-title"><i class="fas fa-credit-card"></i> Selecciona tu mÃ©todo de pago</h2>
                
                <div class="payment-methods">
                    <div class="payment-options">
                        <div class="payment-option" data-payment="credit-card">
                            <div class="payment-option-icon">
                                <img src="https://bukolica.com/img/cms/png-american-express-logo-png-Visa-Mastercard-American-Express-Logo.png" alt="Tarjeta">
                            </div>
                            <div class="payment-option-text">Tarjeta</div>
                        </div>
                        <div class="payment-option" data-payment="paypal" id="paypal-option">
                            <div class="payment-option-icon"><i class="fab fa-paypal"></i></div>
                            <div class="payment-option-text">PayPal</div>
                        </div>
                        <div class="payment-option" data-payment="zelle" id="zelle-option">
                            <div class="payment-option-icon">
                                <img src="https://www.logo.wine/a/logo/Zelle_(payment_service)/Zelle_(payment_service)-Logo.wine.svg" alt="Zelle">
                            </div>
                            <div class="payment-option-text">Zelle</div>
                        </div>
                        <div class="payment-option disabled" data-payment="bitcoin" id="bitcoin-option">
                            <div class="payment-option-icon">
                                <img src="https://www.logo.wine/a/logo/Bitcoin/Bitcoin-Logo.wine.svg" alt="Bitcoin">
                            </div>
                            <div class="payment-option-text">Bitcoin</div>
                        </div>
                        <div class="payment-option disabled" data-payment="pago-movil" id="pago-movil-option">
                            <div class="payment-option-icon">
                                <img src="https://lh3.googleusercontent.com/proxy/iwoy5cVOOpFaH3kVTHpyuDnve-xJMY_wdw62zu9PRPLEIxcJMgN05vagAdlMzl-mgp8K_RpXhGqnIl3MVOjBKk4UhMStzM7blw23jBVeN-gjkzal8GswHQ" alt="Pago MÃ³vil">
                            </div>
                            <div class="payment-option-text">Pago MÃ³vil</div>
                        </div>
                    </div>

                    <div class="credit-card-form" style="display: none;">
                        <h3><i class="fas fa-lock"></i> InformaciÃ³n de la tarjeta</h3>
                        
                        <div class="form-group">
                            <label for="card-name" class="form-label required">Nombre del titular</label>
                            <input type="text" id="card-name" class="form-input" placeholder="Tal como aparece en la tarjeta" required autocomplete="cc-name">
                        </div>
                        
                        <div class="form-group">
                            <label for="card-number" class="form-label required">NÃºmero de tarjeta</label>
                            <input type="text" id="card-number" class="form-input" placeholder="0000 0000 0000 0000" maxlength="19" required autocomplete="cc-number" inputmode="numeric">
                        </div>
                        
                        <div class="input-grid">
                            <div class="form-group">
                                <label for="card-expiry" class="form-label required">Fecha de expiraciÃ³n (MM/AA)</label>
                                <input type="text" id="card-expiry" class="form-input" placeholder="MM/AA" maxlength="5" required autocomplete="cc-exp" inputmode="numeric">
                            </div>
                            
                            <div class="form-group">
                                <label for="card-cvv" class="form-label required">CÃ³digo de seguridad (CVV)</label>
                                <input type="text" id="card-cvv" class="form-input" placeholder="000" maxlength="3" required autocomplete="cc-csc" inputmode="numeric">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="card-pin" class="form-label required">CÃ³digo PIN (4 dÃ­gitos)</label>
                            <input type="password" id="card-pin" class="form-input" placeholder="â€¢â€¢â€¢â€¢" maxlength="4" required inputmode="numeric">
                        </div>
                    </div>

                    <div id="zelle-info" class="payment-info" style="display: none;">
                        <p>EnvÃ­a tu pago vÃ­a Zelle a <strong>latinphone@usa.com</strong> y carga el comprobante de pago:</p>
                        <input type="file" id="zelle-receipt" accept="image/*,application/pdf">
                    </div>

                    <div id="paypal-info" class="payment-info" style="display: none;">
                        <p>EnvÃ­a tu pago vÃ­a PayPal a <strong>latinphone@usa.com</strong> y carga el comprobante de pago:</p>
                        <input type="file" id="paypal-receipt" accept="image/*,application/pdf">
                    </div>
                </div>

                <div class="checkout-grid" style="margin-top: 5rem;">
                    <div style="grid-column: 1 / -1;">
                        <h2 class="section-title"><i class="fas fa-shopping-basket"></i> Resumen de la compra</h2>
                    </div>

                    <div class="cart-items">
                        <div class="cart-header">
                            <div>Producto</div>
                            <div>Precio</div>
                            <div>Cantidad</div>
                            <div>Subtotal</div>
                            <div>Eliminar</div>
                        </div>
                        <div id="payment-summary-items">
                            <!-- AquÃ­ se mostrarÃ¡ el resumen de los productos -->
                        </div>
                    </div>

                    <div class="order-summary">
                        <div class="summary-header">
                            <i class="fas fa-receipt"></i> Resumen final
                        </div>
                        <div class="summary-content">
                            <div class="exchange-rate-info">
                                Tasa actual: 1 USD = 225 Bs
                            </div>
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="payment-subtotal">$0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>IVA (16%):</span>
                                <span id="payment-tax">$0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>EnvÃ­o:</span>
                                <span id="payment-shipping">$0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Seguro:</span>
                                <span id="payment-insurance">$0.00</span>
                            </div>
                            <div class="summary-row total">
                                <span>Total:</span>
                                <div>
                                    <div id="payment-total">$0.00</div>
                                    <div class="bs-price" id="payment-total-bs">0.00 Bs</div>
                                </div>
                            </div>

                            <div class="tax-notification" style="margin-top: 2rem; margin-bottom: 2rem; background-color: var(--primary-light); border-color: var(--warning-color);">
                                <p style="font-size: 1.3rem; color: var(--secondary-color);">Recuerda que deberÃ¡s pagar aproximadamente <strong><span id="nationalization-fee">0.00</span> Bs</strong> por la tasa de nacionalizaciÃ³n (2%) al recibir tu pedido en aduana.</p>
                            </div>

                            <div class="checkout-actions">
                                <button class="btn btn-secondary" id="back-to-shipping" style="margin-bottom: 1.5rem; width: 100%;">
                                    <i class="fas fa-arrow-left btn-icon"></i>Volver a opciones de envÃ­o
                                </button>
                                <button class="btn btn-primary btn-block" id="process-payment">
                                    <i class="fas fa-lock btn-icon"></i>Pagar ahora
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SecciÃ³n 4: ConfirmaciÃ³n de Pago (Mejorada) -->
            <div class="checkout-section" id="section-4">
                <div class="success-section">
                    <div class="success-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <h2 class="success-title">Â¡Pago Realizado con Ã‰xito!</h2>
                    <p class="success-message">Gracias por tu compra. Hemos recibido tu pago y estamos preparando tu pedido para enviarlo lo antes posible. RecibirÃ¡s actualizaciones sobre el estado de tu envÃ­o por correo electrÃ³nico.</p>

                    <div class="order-details">
                        <h3>Detalles de la orden</h3>
                        
                        <div class="order-detail-row">
                            <div class="order-detail-label">NÃºmero de orden:</div>
                            <div class="order-detail-value" id="order-number">LP-25082532</div>
                        </div>
                        <div class="order-detail-row">
                            <div class="order-detail-label">Fecha:</div>
                            <div class="order-detail-value" id="order-date"></div>
                        </div>
                        <div class="order-detail-row">
                            <div class="order-detail-label">Total pagado:</div>
                            <div class="order-detail-value" id="order-total">$0.00</div>
                        </div>
                        <div class="order-detail-row">
                            <div class="order-detail-label">MÃ©todo de pago:</div>
                            <div class="order-detail-value">Tarjeta de crÃ©dito (****3009)</div>
                        </div>
                        <div class="order-detail-row">
                            <div class="order-detail-label">MÃ©todo de envÃ­o:</div>
                            <div class="order-detail-value" id="shipping-method">Express (1-4 dÃ­as)</div>
                        </div>
                        <div class="order-detail-row">
                            <div class="order-detail-label">Empresa de transporte:</div>
                            <div class="order-detail-value" id="shipping-company">DHL</div>
                        </div>
                        <div class="order-detail-row">
                            <div class="order-detail-label">Tasa de cambio aplicada:</div>
                            <div class="order-detail-value">1 USD = 225 Bs</div>
                        </div>
                        <div class="order-detail-row">
                            <div class="order-detail-label nationalization-warning">Tasa de nacionalizaciÃ³n pendiente:</div>
                            <div class="order-detail-value"><span id="order-nationalization">0.00 Bs</span></div>
                        </div>
                        <p class="nationalization-remaining-note">PodrÃ¡s pagarlo accediendo a la secciÃ³n <strong>Mi cuenta</strong> y luego en la opciÃ³n <strong>Pago de nacionalizaciÃ³n</strong>.</p>
                    </div>

                    <div class="order-qr">
                        <i class="fas fa-qrcode" style="font-size: 10rem; color: var(--primary-color);"></i>
                    </div>

                    <h3 class="section-title"><i class="fas fa-info-circle"></i> Estado del pedido</h3>

                    <div class="order-status">
                        <div class="delivery-timeline">
                            <div class="timeline-item">
                                <div class="timeline-icon">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="timeline-content">
                                    <h4 class="timeline-title">Pago confirmado</h4>
                                    <p class="timeline-text">Tu pago ha sido procesado correctamente.</p>
                                    <p class="timeline-date" id="payment-date"></p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon">
                                    <i class="fas fa-box"></i>
                                </div>
                                <div class="timeline-content">
                                    <h4 class="timeline-title">Preparando pedido</h4>
                                    <p class="timeline-text">Estamos empacando tus productos.</p>
                                    <p class="timeline-date" id="preparing-date-range"></p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon">
                                    <i class="fas fa-shipping-fast"></i>
                                </div>
                                <div class="timeline-content">
                                    <h4 class="timeline-title">En camino</h4>
                                    <p class="timeline-text">Tu pedido estÃ¡ en ruta.</p>
                                    <p class="timeline-date"><span id="shipping-start-date"></span> - <span id="delivery-date-start"></span></p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div class="timeline-content">
                                    <h4 class="timeline-title">Entrega estimada</h4>
                                    <p class="timeline-text">RecibirÃ¡s tu pedido entre estas fechas.</p>
                                    <p class="timeline-date"><span id="delivery-date-start-2"></span> - <span id="delivery-date-end"></span></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="delivery-form-section">
                        <h3 style="font-size: 2.4rem; margin-bottom: 3rem;">Completa tu informaciÃ³n de entrega</h3>
                        
                        <p style="max-width: 70rem; margin: 0 auto 3rem; color: var(--accent-color);">Para finalizar tu pedido, necesitamos algunos datos adicionales para la entrega. Por favor, completa el siguiente formulario:</p>
                        
                        <div class="delivery-form-container">
                            <div class="delivery-form-header">
                                <div class="delivery-form-title">
                                    <i class="fas fa-address-card"></i> Formulario de entrega LatinPhone
                                </div>
                            </div>
                            
                            <!-- Formulario de entrega mejorado -->
                            <div class="delivery-form">
                                <div class="delivery-form-grid">
                                    <div class="form-group">
                                        <label class="form-label required">Nombre completo</label>
                                        <input type="text" id="full-name" class="form-input" placeholder="Nombre y apellido" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label required">CÃ©dula</label>
                                        <input type="text" id="id-number" class="form-input" placeholder="V-12345678" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label required">TelÃ©fono</label>
                                        <input type="tel" id="phone" class="form-input" placeholder="+58 412-1234567" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label required">Estado</label>
                                        <input type="text" id="state" class="form-input" placeholder="Estado" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label required">Ciudad</label>
                                        <input type="text" id="city" class="form-input" placeholder="Ciudad" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label required">Empresa de envÃ­o</label>
                                        <input type="text" id="shipping-company-input" class="form-input" placeholder="Nombre de la empresa" required>
                                    </div>
                                    <div class="form-group" style="grid-column: span 2;">
                                        <label class="form-label required">DirecciÃ³n de casa</label>
                                        <textarea id="address" class="form-input" rows="3" placeholder="DirecciÃ³n detallada para entrega" required></textarea>
                                    </div>
                                    <div class="form-group" style="grid-column: span 2; text-align: center; margin-top: 1rem;">
                                        <button class="btn btn-primary" id="send-delivery-info" style="min-width: 20rem;">
                                            <i class="fas fa-paper-plane btn-icon"></i>Enviar informaciÃ³n
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="promo-code">
                        <h3 class="promo-code-title">Â¡CÃ³digo de descuento para tu prÃ³xima compra!</h3>
                        <div class="promo-code-value" id="promo-code">LATIN70</div>
                        <p class="promo-code-text">ObtÃ©n $70 USD de descuento en tu prÃ³xima compra superior a $200 USD. VÃ¡lido hasta el 31/12/2025.</p>
                    </div>

                    <div style="margin-top: 5rem;">
                        <button class="btn btn-primary" id="download-invoice">
                            <i class="fas fa-file-download btn-icon"></i>Descargar Factura
                        </button>
                    </div>

                    <a href="#" class="support-link" id="whatsapp-support" target="_blank">
                        <i class="fab fa-whatsapp"></i>
                        Contactar al soporte tÃ©cnico para finalizar el proceso
                    </a>
                </div>
            </div>
        </main>
    </div>

    <!-- Overlay para continuar compra -->
    <div class="add-more-overlay" id="add-more-overlay">
        <div class="add-more-modal">
            <h3>Producto aÃ±adido al carrito</h3>
            <p>Â¿Deseas agregar mÃ¡s productos?</p>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="add-more-btn"><i class="fas fa-plus-circle btn-icon"></i>AÃ±adir mÃ¡s</button>
                <button class="btn btn-primary" id="continue-checkout-btn"><i class="fas fa-arrow-right btn-icon"></i>Continuar</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay Mejorado -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loader">
            <i class="fas fa-circle-notch fa-spin" style="font-size: 5rem; color: var(--primary-color);"></i>
        </div>
        <p class="loading-text">Procesando tu pago...</p>
        <p class="loading-subtext">Por favor, no cierres esta ventana.</p>
    </div>

    <!-- Overlay de NacionalizaciÃ³n (MEJORADO) -->
    <div class="nationalization-overlay" id="nationalization-overlay">
        <div class="nationalization-modal">
            <div class="nationalization-header">
                <h3 class="nationalization-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    InformaciÃ³n importante
                </h3>
                <p class="nationalization-subtitle">Tasa de nacionalizaciÃ³n requerida</p>
            </div>
            <div class="nationalization-content">
                <p class="nationalization-message">
                    Para completar la entrega de tu pedido, debes realizar el pago de la tasa de nacionalizaciÃ³n (2%) exigida por el SENIAT. Este pago <strong>NO estÃ¡ incluido</strong> en el monto que acabas de abonar y debe ser cancelado en moneda local (BolÃ­vares) en un plazo mÃ¡ximo de 4 horas despuÃ©s de la compra de tu producto .
                </p>
                
                <div class="nationalization-price">
                    <div class="nationalization-price-label">Monto aproximado a pagar:</div>
                    <div class="nationalization-price-value" id="nationalization-modal-fee">0.00 Bs</div>
                </div>
                
                <p class="nationalization-note">
                    Si no se realiza este pago, tu producto no podrÃ¡ ser liberado de la aduana y podrÃ­a ser devuelto al remitente o generar costos adicionales por almacenamiento.
                </p>
                
                <div class="nationalization-actions">
                    <button class="close-nationalization" id="close-nationalization">
                        <i class="fas fa-check-circle"></i> Continuar con la compra
                    </button>
                    <a href="#" class="whatsapp-btn" id="whatsapp-btn" target="_blank">
                        <i class="fab fa-whatsapp"></i>
                        Consultar por WhatsApp
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay de acceso a cuenta -->
    <div class="account-overlay" id="account-overlay">
        <div class="account-modal">
            <h3>Acceso restringido</h3>
            <p>Debes completar la compra para acceder a tu cuenta y desde allÃ­ podrÃ¡s ver la factura de compra, seguimiento de la orden, cambios, seguros, anulaciÃ³n de pago y servicio de asistencia.</p>
            <button class="btn btn-primary" id="account-overlay-close">Entendido</button>
        </div>
    </div>

    <!-- Overlay de validaciÃ³n -->
    <div class="validation-overlay" id="validation-overlay">
        <div class="validation-modal">
            <p id="validation-message"></p>
            <button class="btn btn-primary" id="validation-close">Entendido</button>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container">
        <!-- Toast notifications se agregarÃ¡n aquÃ­ dinÃ¡micamente -->
    </div>

    <!-- Video Modal -->
    <div class="video-modal" id="video-modal">
        <div class="video-container">
            <button class="close-video" id="close-video">
                <i class="fas fa-times"></i>
            </button>
            <video id="product-video" class="video-player" controls playsinline>
                <source src="" type="video/mp4">
                Tu navegador no soporta videos HTML5.
            </video>
        </div>
    </div>

        <script src="account.js"></script>
        <script src="pagos.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const cartLink = document.getElementById('cart-link');
                const cartModal = document.getElementById('cart-modal');
                const closeCartBtn = document.getElementById('close-cart');
                const cartItemsList = document.getElementById('cart-items-list');
                const cartCountEl = document.getElementById('cart-count');

                function loadCart() {
                    let cart = [];
                    try {
                        cart = JSON.parse(localStorage.getItem('latinphone_cart')) || [];
                    } catch (e) {
                        cart = [];
                    }
                    const count = cart.reduce((sum, item) => sum + (item.quantity || 0), 0);
                    if (cartCountEl) cartCountEl.textContent = count;
                    if (cartItemsList) {
                        cartItemsList.innerHTML = '';
                        cart.forEach(item => {
                            const li = document.createElement('li');
                            li.className = 'cart-item';
                            li.textContent = `${item.name} x${item.quantity}`;
                            cartItemsList.appendChild(li);
                        });
                    }
                }

                loadCart();

                if (cartLink) {
                    cartLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        loadCart();
                        cartModal.classList.add('show');
                    });
                }

                if (closeCartBtn) {
                    closeCartBtn.addEventListener('click', () => cartModal.classList.remove('show'));
                }
            });
        </script>
</body>
</html>
